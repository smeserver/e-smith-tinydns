Index: e-smith-tinydns/e-smith-tinydns.spec
diff -u e-smith-tinydns/root/etc/e-smith/templates/var/service/tinydns/root/data/60hostARecords:1.5 e-smith-tinydns/root/etc/e-smith/templates/var/service/tinydns/root/data/60hostARecords:1.6
--- e-smith-tinydns/root/etc/e-smith/templates/var/service/tinydns/root/data/60hostARecords:1.5	Mon Jan 12 16:52:39 2004
+++ e-smith-tinydns/root/etc/e-smith/templates/var/service/tinydns/root/data/60hostARecords	Tue Jan 13 11:40:32 2004
@@ -14,9 +14,11 @@
                 $anIP = $LocalIP;
             }
             $anIP ||= $h->prop('ExternalIP') || $h->prop('InternalIP');
-            $OUT .= "=" . $h->key . ":$anIP\n";
-            # Note that this ip is taken, so we don't mention it in the
-            # general host list later.
+            # If the ip is already taken, make this record an alias.
+            my $prefixchar = '=';
+            $prefixchar = '+' if exists $allocated_ips{$anIP};
+            $OUT .= $prefixchar . $h->key . ":$anIP\n";
+            # Note that this ip is taken.
             $allocated_ips{$anIP} = 1 unless exists $allocated_ips{$anIP};
         }
         $OUT .= "\n";
